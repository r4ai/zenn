---
title: "大学のプログラミングサークルのブログをAstro×SolidJSで制作したので技術スタックを紹介"
emoji: "🚀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [
  "Astro",
  "SolidJS",
  "TailwindCSS",
  "ArkUI",
  "ParkUI"
]
publication_name: "ricora"
published: false
---

[Astro]: https://astro.build/
[SolidJS]: https://docs.solidjs.com/
[React]: https://react.dev/
[Vue]: https://ja.vuejs.org/
[Next.js]: https://nextjs.org/
[Fresh]: https://fresh.deno.dev/
[MDX]: https://mdxjs.com/
[Kobalte]: https://kobalte.dev/docs/core/overview/introduction
[Vite]: https://vitejs.dev/
[Bun]: https://bun.sh/
[Node.js]: https://nodejs.org/
[Tailwind CSS]: https://tailwindcss.com/
[Radix Colors]: https://www.radix-ui.com/colors
[Ark UI]: https://ark-ui.com/
[Park UI]: https://park-ui.com/docs/panda/overview/introduction
[Chakra UI]: https://chakra-ui.com/
[shadcn/ui]: https://ui.shadcn.com/
[unfurl]: https://github.com/jacktuck/unfurl
[oEmbed]: https://oembed.com/
[GFM]: https://github.github.com/gfm/
[CommonMark]: https://commonmark.org/
[Shiki]: https://shiki.style/
[remark]: https://github.com/remarkjs/remark
[KaTeX]: https://katex.org/
[MathJax]: https://www.mathjax.org/
[Iconify]: https://iconify.design/
[Satori]: https://github.com/vercel/satori
[Budoux]: https://github.com/google/budoux
[GitHub Pages]: https://pages.github.com/
[Pagefind]: https://pagefind.app/
[FlexSearch]: https://github.com/nextapps-de/flexsearch
[tinysearch]: https://github.com/tinysearch/tinysearch

## はじめに

私の所属するプログラミングサークル[RICORA Programming Team](https://alg.tus-ricora.com/about/)のブログを[Astro]×[SolidJS]でリニューアルしたので、その技術スタックを紹介します。

以下、リニューアルしたブログのリポジトリとURLです。

https://github.com/ricora/alg.tus-ricora.com

https://alg.tus-ricora.com/

## 技術スタック

### ランタイム

[Bun]はパッケージマネージャーとテストツールとして利用し、実際のビルドは[Node.js]で行うようにしました。

開発当初はビルドを含めて全てを[Bun]で行っていましたが、開発が進むにつれ原因不明のエラー等が発生するようになり辛くなったため、ビルドなど互換性が重要となる部分では[Node.js]を利用するようにしました。

https://bun.sh/

https://nodejs.org/en/

### フレームワーク

タイトルにあるように、本ブログではSSG用メタフレームワークとして[Astro]を採用しました。

[Astro]はアイランドアーキテクチャを特徴とするメタフレームワークであり、[Next.js]や[Fresh]などと良く比較されます。

<!-- TODO: アイランドアーキテクチャの軽い説明？AppRouterやFreshですでにかなり有名なので無くても良きもする。React 18のPartial Hydrationの説明も交えると良いかも？ -->

<!-- textlint-disable -->
[Astro]は[Next.js]に比べて、
<!-- textlint-enable -->

- 静的サイトの生成をメインに設計されているので、シンプル
- アイランドアーキテクチャによって、必要なタイミングで必要な個所にのみJavaScriptを適用できるので、パフォーマンスの向上が期待される
- [MDX]によるコンテンツ管理の仕組みがフレームワークレベルで提供されている
- [Vite]ベースなので高速（Turbopack版Next.jsも高速だが）

であるため、本ブログのような静的サイトの開発に適していると考え採用しました。

https://astro.build/

また、UIフレームワークとしては[SolidJS]を採用しました。

[SolidJS]は、仮想DOMを持たない[React]のようなフレームワークです。[React]と比べて、パフォーマンスが高く、コードがシンプルになるという特徴があります。個人的に今一番推しているフレームワークです。

[React]にするか悩みましたが、[React]のエコシステムをあまり利用する予定がなく、またプロジェクトの規模も小さいため何かあれば自分で実装すれば良いと考え、[SolidJS]にしました。

https://docs.solidjs.com/

### スタイル

CSSフレームワークとしては[Tailwind CSS]を採用しました。

個人開発で良く使っており、高速に開発を進められるので採用しました。

https://tailwindcss.com/

また、カラーパレットとして[Radix Colors]を採用しました。これは後述する[Park UI]で利用されており、今回初めて使用しましたがかなり良かったです。

https://www.radix-ui.com/colors

### コンポーネントライブラリ

UIコンポーネントライブラリとしては、[Ark UI]と[Park UI]を採用しました。

[Ark UI]は、[Chakra UI]の開発するヘッドレスUIコンポーネントライブラリであり、[React]、[Vue]、[SolidJS]に対応しています。[SolidJS]で利用できる数少ないUIコンポーネントライブラリの1つです。[Ark UI]以外では、[Kobalte]も有名です。

[Park UI]は、[Ark UI]のメンテナが開発する[shadcn/ui]のようなもので、スタイル済みのコンポーネントをコピペすることでデザインシステムを一から作らずに済みます。

https://ark-ui.com/

https://park-ui.com/

### 記事の執筆

#### MDX

[MDX]は、Markdownをベースとしつつ、JSXをMarkdown内に記述することを可能としたマークアップ言語です。一部利用できないMarkdown（[CommonMark]）の記法がありますが、概ね[CommonMark]に準拠しています。

また、今回制作したブログでは通常の[MDX]の記法に加え、[remark-gfm](https://github.com/remarkjs/remark-gfm)を使い[GFM]の記法も使えるようにしました。

https://mdxjs.com/

今回制作したブログで実際に利用できる[MDX]の記法は、次のリンクから確認できます。

https://alg.tus-ricora.com/mdx-guide/

#### シンタックスハイライト

コードブロックのシンタックスハイライターには[Shiki]を採用しました。

https://shiki.style/

また、コードブロックのタイトルやDiff表示、行ハイライトなどの機能の追加には、筆者が以前作成した[rehype-custom-code](https://github.com/r4ai/rehype-custom-code)を利用しました。

実際のコードブロックの表示は以下のリンクから確認できます。

https://alg.tus-ricora.com/mdx-guide/#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF

#### コールアウト

[GitHubで利用可能なアラートのような記法](https://docs.github.com/en/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax#alerts)を[MDX]で利用できるように、[remark]のプラグインを自前で実装しました。

```md:コールアウトの例
> [!note] タイトル
> 本文
```

次が実際のプラグインのソースコードです。

https://github.com/ricora/alg.tus-ricora.com/blob/main/src/lib/remark-plugins/remarkCallout.ts

このプラグインでは、先ほどの"コールアウトの例"のコードを次のように変換します。

```html:"コールアウトの例"の変換後のHTML
<callout calloutType="note" calloutIsFoldable="false">
  <callout-title calloutType="note">title here</callout-title>
  <p>body here</p>
</callout>
```

ここで、`callout` タグと `callout-title` タグに対してそれぞれ [`Callout`](https://github.com/ricora/alg.tus-ricora.com/blob/main/src/components/Elements/Callout/Callout.astro) 、[`CalloutTitle`](https://github.com/ricora/alg.tus-ricora.com/blob/main/src/components/Elements/Callout/CalloutTitle.astro) コンポーネントを[Custom Components](https://docs.astro.build/en/guides/markdown-content/#assigning-custom-components-to-html-elements)として割り当てることで、コールアウトが表示されるよう実装しました。

ここで作成したプラグインをベースに、より詳細なカスタマイズを可能とした[remark]のプラグインをライブラリとして公開したので、良ければ利用してみてください（宣伝）。次がそのリポジトリです。

https://github.com/r4ai/remark-callout

#### リンクカード

リンクカードはZennと同様に、URLを貼り付けるだけで自動的にOG画像やタイトル、ディスクリプションを取得して表示するように実装しました。

[コールアウト](#コールアウト)と同様に、空白行に挟まれたURLを `link-card` タグとして変換するRemarkのプラグインを自前で実装し、それに対応する [`LinkCard`](https://github.com/ricora/alg.tus-ricora.com/blob/main/src/components/Elements/LinkCard/LinkCard.astro) コンポーネントを作成しました。

OG画像やタイトル、ディスクリプションの取得には[unfurl]を利用しました。

#### 埋め込み

埋め込みはZennと同様に、埋め込みに対応したURLを貼り付けるだけで自動的に埋め込みを表示するように実装しました。

埋め込みには[oEmbed]を利用しました。[oEmbed]は、サードパーティのサイト上でURLの埋め込み表現を可能にするためのフォーマットです。多くのサイトで利用されており、容易に埋め込みを実装できます。

https://oembed.com/

[oEmbed]の情報の取得には[unfurl]を利用しました。この際、[unfurl]の[oEmbed]の型定義が一部不足していたため、[unfurl]に[PR](https://github.com/jacktuck/unfurl/pull/113)を送りました。

#### 数式

<!-- textlint-disable -->
LaTeXのレンダリングには[KaTeX]を採用しました。[MathJax]の方が対応しているLaTeXの記法が多いため、数式を沢山書く場合は[MathJax]の方が良いかもしれません。
<!-- textlint-enable -->

https://katex.org/

### アイコン

アイコンフレームワークとしては、[Iconify]を採用しました。大量のオープンソースなアイコンを集めたものであり、とりあえずこれを入れておけば個別にアイコンをインストールする必要がなくなります。

https://iconify.design/

### OG画像の生成

OG画像の生成には、HTMLとCSSからSVGを生成する[Satori]を採用しました。これはVercelが開発したもので、HTMLとCSSの知識で簡単に画像を生成できます。使えるCSSは制限されていますが、基本的なものは使えるので、OG画像の生成には十分です。

また、OG画像内の文章の分かち書きには[Budoux]を採用しました。これはGoogleが開発したもので、日本語の文章を分かち書きできます。

https://github.com/vercel/satori

https://github.com/google/budoux

### 検索

ブラウザで完結する全文検索ライブラリとして、[Pagefind]を採用しました。同様の全文検索ライブラリとしては[tinysearch]や[FlexSearch]などがありますが、これらはデフォルトで日本語に対応していないため採用しませんでした。

https://pagefind.app/

### デプロイ

デプロイには[GitHub Pages]を利用しました。機能は最小限ですが、無料かつGitHubだけで完結するので便利です。

:::message
理由を加筆？
:::

https://pages.github.com/

## ブログ開発を通じたOSSへの貢献

このブログの開発で利用したいくつかのOSSに対して、バグの報告やPRを送ることができました。

https://github.com/jacktuck/unfurl/pull/113

https://github.com/adventar/adventar/issues/54

:::message
他に何かあれば加筆
:::

## 今後の展望

本ブログはGitHubリポジトリのIssue駆動で開発を進めており、記事執筆時点で40件のIssueが立っています。今後はこれらのIssueを1つずつ解決していく予定です。

https://github.com/ricora/alg.tus-ricora.com/issues

## おわりに

具体的な実装にはあまり触れられませんでしたが、以上が弊サークルのブログで採用した技術スタックです。

一からブログを制作するのは大変ですが、地味で面倒な部分の多くを[Astro]がカバーしてくれるので、比較的楽に実装できました。自作ブログは、独自の[MDX]記法を実装できるなど、自由度が高いので面白いです。是非皆さんも[Astro]×[SolidJS]でブログを実装してみてください。

:::message
新歓で新入生を募集している旨の宣伝？
:::
