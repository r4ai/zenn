---
title: "ãƒ¢ãƒ€ãƒ³ãª Adobe Extension é–‹ç™ºæ‰‹é †æ›¸"
emoji: "ğŸš€"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["adobe"]
published: true
---

# ã“ã®è¨˜äº‹ã®å†…å®¹

- Adobe Extensionã®æ¦‚è¦
- Vite + Svelte + TypeScriptã§Premiere Proã®Extensionã‚’ä½œã‚‹ã€‚

# ãã‚‚ãã‚‚ Extension ã£ã¦ãªã«ï¼Ÿ

## Extensionã¨Scriptã¨Pluginã®é•ã„

- Script:
  - ã¡ã‚‡ã£ã¨ã—ãŸã“ã¨ã®è‡ªå‹•åŒ–ã«ä½¿ãˆã‚‹
  - å‡ã£ãŸUIã¯ä½œã‚Œãªã„
  - ExtendScriptã§æ›¸ãã€‚
  - e.g. [roll-it](https://aescripts.com/roll-it/)
- Extension:
  - Scriptã®ä¸Šä½äº’æ›ã€‚
  - Svelte, React, Vueã¨ã‹ãƒ¢ãƒ€ãƒ³ãªãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ã£ã¦UIã‚’æ§‹ç¯‰ã§ãã‚‹
  - e.g. [Flow](https://flashbackj.com/product/flow)
- Plugin:
  - ä¸€ç•ªå¼·åŠ›ãªæ©Ÿèƒ½ã‚’æŒã£ã¦ã„ã‚‹ã€‚
  - AEã§ç‹¬è‡ªã®Effectã‚’è¿½åŠ ã—ãŸã„ã¨ããªã©ã«ä½¿ã†ã€‚
  - C++ã§è¨˜è¿°ã—ã¦ã€å®Ÿéš›ã«æç”»ã•ã‚Œã‚‹ãƒ”ã‚¯ã‚»ãƒ«ã‚’æ“ä½œã§ãã‚‹ã€‚
  - e.g. [DeepGlow](https://flashbackj.com/product/deep-glow), [Element3D](https://flashbackj.com/product/element-3d)

|                         | Scripts       | Extensions                | Plugins       |
| ----------------------- | ------------- | ------------------------- | ------------- |
| Language                | ExtendScript  | JavaScript + ExtendScript | C++           |
| Fast Development        | Yes           | Yes                       | No            |
| Automate Tasks          | Yes           | Yes                       | Yes           |
| Change Pixels (Effects) | No            | No                        | Yes           |
| Format                  | .jsx, .jsxbin | .zxp                      | .aex, .plugin |


https://hyperbrew.co/blog/scripts-extensions-plugins/

## Extension (CEP) ã«ã¤ã„ã¦

å®Ÿè¡Œç’°å¢ƒã¯ã€æ¬¡ã®ã¨ãŠã‚Šã‚‰ã—ã„ã€‚Electronã¿ãŸã„ãªæ„Ÿã˜ã€‚

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰: Chromium
ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰: Node.js

ãªãŠã€ãƒ›ã‚¹ãƒˆã‚¢ãƒ—ãƒª(e.g. AE, PS, ...)ã¨ã®é€šä¿¡ã«ã¯ã€å¾“æ¥ã®ExtendScript[^1]ãŒã„ã‚‹ã€‚ExtendScriptã¯ES3ãƒ™ãƒ¼ã‚¹ã§é€Ÿåº¦ã‚‚é…ã„ã—ã”ã¿ãªã®ã§ã€å‡ºæ¥ã‚‹é™ã‚Šã®ã“ã¨ã¯JavaScriptãƒ¬ã‚¤ãƒ¤ãƒ¼ã§è¡Œã£ã¦ã€å¿…è¦æœ€ä½é™ã®ã“ã¨ã ã‘ã‚’ExtendScriptãƒ¬ã‚¤ãƒ¤ãƒ¼ã§è¡Œã†ã¹ãã‚‰ã—ã„ã€‚

[^1]: ExtendScript: GASã®Adobeç‰ˆã¿ãŸã„ãªã‚„ã¤ã€‚ES3(1999å¹´ãƒªãƒªãƒ¼ã‚¹)ã‚’ãƒ™ãƒ¼ã‚¹ã«AdobeãŒæ”¹é€ ã—ãŸJavaScriptã€‚(å¤ã™ãã‚“ã ã‚...)

### ãƒ‡ãƒãƒƒã‚°

- JavaScriptãƒ¬ã‚¤ãƒ¤ãƒ¼(Chromium+Node.js):
  - æ™®é€šã®webé–‹ç™ºã¨åŒã˜ã§ã€localã‚µãƒ¼ãƒãƒ¼å»ºã¦ã¦ChromeDevToolsã§ãƒ‡ãƒãƒƒã‚°ã€‚
- ExtendScriptãƒ¬ã‚¤ãƒ¤ãƒ¼: 
  - VSCodeæ‹¡å¼µæ©Ÿèƒ½ã®[ExtendScript Debugger](https://marketplace.visualstudio.com/items?itemName=Adobe.extendscript-debug)ã‚’ä½¿ã†ã‚‰ã—ã„

### é…å¸ƒ

[ZXPSignCMD](https://github.com/Adobe-CEP/CEP-Resources/tree/master/ZXPSignCMD)ã§ZXPãƒ•ã‚¡ã‚¤ãƒ«ã«åœ§ç¸®ï¼Ÿã—ã¦é…å¸ƒã™ã‚‹ã¨è‰¯ã„ã‚‰ã—ã„ã€‚

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ã¯ã€[ZXP/UXP Installer](https://aescripts.com/learn/zxp-installer/)ã‚’ä½¿ã†ã¨ä¾¿åˆ©(å¾Œã§é–‹ç™ºã®éš›ã«ã‚‚ä½¿ã„ã¾ã™)ã€‚

### UXPã«ã¤ã„ã¦

- ç¾åœ¨Adobeã¯ã€CEPã«ä»£ã‚ã‚‹extensioné–‹ç™ºã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦ã€UXPã‚’çµ¶è³›é–‹ç™ºä¸­
- å°†æ¥çš„ã«ã¯ã€CEPã¯UXPã«ä»£ã‚ã‚‹äºˆå®šã‚‰ã—ã„ã€‚
- ç¾çŠ¶ã€**Photoshopã¨XDã—ã‹å¯¾å¿œã—ã¦ãªã„** (2023/04/05)
- ExtendScriptã¨ã°ã„ã°ã„å‡ºæ¥ã‚‹ã®ã§ã€å¤§åˆ†é«˜é€ŸåŒ–ã§ãã‚‹ã‚‰ã—ã„ã€‚
- Adobeçš„ã«ã¯çµæ§‹æœ¬æ°—ã£ã½ã„ã‘ã©ã€Premire Proã«ã„ã¤å¯¾å¿œã™ã‚‹ã‹ã¯å…¨ãä¸æ˜ã€‚

https://developer.adobe.com/photoshop/uxp/2022/guides/
https://forums.creativeclouddeveloper.com/t/any-info-regarding-the-status-of-uxp-in-other-cc-application/4460/7

### å‚è€ƒæ–‡çŒ®

https://hyperbrew.co/blog/building-adobe-extensions/

# ã„ã–å°‹å¸¸ã«é–‹ç™º!!

## å¿…è¦ãªã‚½ãƒ•ãƒˆã‚’å…¥ã‚Œã‚‹

å®Ÿéš›ã«CEPã‚’é–‹ç™ºã—ã¦ã„ãï¼ï¼
ã¾ãšã¯ã€é–‹ç™ºã«å¿…è¦ãªãƒ„ãƒ¼ãƒ«é¡ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚ä¸€å¿œã“ã®è¨˜äº‹ã§ã¯éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æ–¹ã§ã‚‚æˆ¸æƒ‘ã‚ãªã„ã‚ˆã†ã«ã€VSCodeãªã©è¶…åŸºæœ¬çš„ãªã‚½ãƒ•ãƒˆé¡ã‚‚è¨˜è¼‰ã—ã¦ãŠãã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚½ãƒ•ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### å¿…è¦ãªã‚½ãƒ•ãƒˆä¸€è¦§

- VSCode
  - è¨€ã‚ãšã¨çŸ¥ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã€‚ExtendScriptã®ãƒ‡ãƒãƒƒã‚°ã«ã‚‚ä½¿ã†ã®ã§å¿…è¦ã€‚
  - URL: https://code.visualstudio.com/
- ExtendedScript Debugger
  - Adobeå…¬å¼ãŒé–‹ç™ºã—ã¦ã‚‹VSCodeã®æ‹¡å¼µæ©Ÿèƒ½
  - ExtendedScriptã®ãƒ‡ãƒãƒƒã‚°ã«å¿…è¦
  - URL: https://marketplace.visualstudio.com/items?itemName=Adobe.extendscript-debug
- Node.js
  - JavaScriptã®å®Ÿè¡Œç’°å¢ƒã€‚é–‹ç™ºã«å¿…è¦ã€‚
  - URL: https://nodejs.org/ja/
- Yarn
  - Node.jsã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ãƒ„ãƒ¼ãƒ«ã€‚é–‹ç™ºã«å¿…è¦ã€‚
  - URL: https://classic.yarnpkg.com/en/docs/install
- ZXP/UXP Installer
  - Extensionã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©â€•ã€‚é–‹ç™ºã«å¿…è¦ã€‚
  - ä»Šå›ã¯ã€å…¨ã¦ã®CEPãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ `playerDebugMode` ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã®ã«ä½¿ã†
  - URL: https://aescripts.com/learn/zxp-installer/

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

ã‚ˆã†ã‚„ãé–‹ç™ºç’°å¢ƒãŒæ•´ã£ãŸã®ã§ã€å®Ÿéš›ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã£ã¦ã„ãã€‚[bolt-cep](https://github.com/hyperbrew/bolt-cep)ã¨ã„ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆç”¨ã®ç¥ã‚³ãƒãƒ³ãƒ‰ãŒç¬¬ä¸‰è€…ã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ãã‚Œã‚’ä½¿ã†ã€‚

https://github.com/hyperbrew/bolt-cep

å®Ÿéš›ã«ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã€‚å°šã€yarnã¯v1ã§ãªã„ã¨ã„ã‘ãªã„ã‚‰ã—ã„ã®ã§æ³¨æ„[^2]ã€‚

```bash
yarn create bolt-cep
```

ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè³ªå•ãŒå‡ºã¦ãã‚‹ã®ã§ã€é©å®œç­”ãˆã‚‹ã€‚

![bolt-cepå…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã®README.mdã‚ˆã‚Š](https://github.com/hyperbrew/bolt-cep/raw/master/create-bolt-cep--demo.gif)

ä»Šå›ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ãŸã€‚

```txt
â”Œ   create-bolt-cep
â”‚   by Hyper Brew | https://hyperbrew.co
â”‚
â—‡  Where do you want to create your project?
â”‚  ./sampleApp
â”‚
â—‡  Which UI framework would you like to use?
â”‚  Svelte
â”‚
â—‡  Which Svelte template would you like to start with?
â”‚  Skeleton (only selected apps and no sample UI or functions)
â”‚
â—‡  Which Adobe apps do you want to support?
â”‚  Premiere Pro
â”‚
â—‡  What do you want to use as your panel's display name?
â”‚  Sample App
â”‚
â—‡  What do you want to use as your panel's id?
â”‚  com.sampleApp.cep
â”‚
â—‡  Do you want to install dependencies? (recommended)
â”‚  No
â”‚
```

[^2]: `yarn set version classic` ã§v1ã«æˆ»ã›ã‚‹ã€‚

## ãƒ“ãƒ«ãƒ‰

æ¬¡ã«ã€ä½œã£ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã„ãã€‚

```bash
cd sampleApp
yarn
yarn build
```

ã“ã‚Œã§ `sampleApp/dist/cep` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«extensionãŒç”Ÿæˆã•ã‚ŒãŸã€‚

ãªãŠã€ç­†è€…ã®ç’°å¢ƒ(windows11)ã§ã¯ `yarn build` æ™‚ã«ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ãŒç”Ÿæˆå‡ºæ¥ãªã‹ã£ãŸæ—¨ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã®ã§ã€æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰ã§æ‰‹å‹•ã§ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚’ä½œæˆã—ãŸã€‚

```bash:powershell
New-Item -ItemType Junction -Path "C:Path\To\PremierPro\CEP\extensions\com.your_app_name.cep" -Target "C:\MyPath\to\sampleApp\dist\com\"
```

:::message
- `-Path` ã®å¾Œã«ç¶šããƒ‘ã‚¹ã¯ã€Premiere Proã®CEPãƒ•ã‚©ãƒ«ãƒ€ã®ãƒ‘ã‚¹ã«ã€ä½œã£ãŸextensionã®IDã‚’ã¤ã‘ãŸã‚‚ã®ã€‚
  - e.g. `"C:\Program Files\Adobe\Adobe Premiere Pro 2023\CEP\extensions\com.sample_app.cep"`
- `-Target` ã®å¾Œã«ç¶šããƒ‘ã‚¹ã¯ã€ä»Šä½œã£ãŸExtensionã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‘ã‚¹ã«ã€`dist\cep\` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ã‚’ã¤ã‘ãŸã‚‚ã®ã€‚
  - e.g. `"D:\src\premiere\sampleApp\dist\cep\"`
:::

## playerDebugMode ã‚’æœ‰åŠ¹ã«ã™ã‚‹

å…ˆã»ã©ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸZXP/UXP Installerã‚’ä½¿ã£ã¦ã€`playerDebugMode` ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚ã“ã‚Œã‚’ã—ãªã„ã¨ã€ä½œã£ãŸExtensionã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ã‘ãªã„ã€‚

1. ZXP/UXP Installerã‚’èµ·å‹•ã™ã‚‹
2. ç”»é¢å·¦ä¸Šã®æ­¯è»Šã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€è¨­å®šç”»é¢ã‚’é–‹ã
3. è¨­å®šç”»é¢å·¦ä¸‹ã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹
4. CEP11ã¨CEP10ã® `enable debugging` ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹

![è¨­å®šç”»é¢](/images/debugmode.png)

ã¡ãªã¿ã«ç§ã¯æœ€åˆã“ã‚Œã‚’ã—ã¦ãªãã¦ç„¦ã£ãŸ()

https://github.com/hyperbrew/bolt-cep/issues/56

## å‹•ä½œç¢ºèª

å®Ÿéš›ã«Extensionã‚’Premiere Proã§å‹•ã‹ã—ã¦ã¿ã‚‹ã€‚

1. `yarn dev` ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã™ã‚‹ã€‚
2. Premiere Proã‚’èµ·å‹•ã™ã‚‹
3. é©å½“ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã
4. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã® `Window` -> `Extensions` -> `Sample App` ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹

![å‹•ä½œç¢ºèª](/images/open_extension.png)

ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã€‚

![Extensionã®ç”»é¢](/images/works.png)

ã“ã‚Œã§å‹•ä½œç¢ºèªã¯å®Œäº†ã€‚

# ãŠã¾ã‘

## tailwindcss ã®å°å…¥

åŸºæœ¬ã¯ã€[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://tailwindcss.com/docs/guides/sveltekit)ã«å¾“ãˆã°ã‚ˆã„ã€‚

1. Install Tailwind CSS

```bash
yarn add -D tailwindcss postcss autoprefixer
yarn tailwindcss init -p
```

2. tailwindcssã®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹

```diff js:tailwind.config.js
  /** @type {import('tailwindcss').Config} */
  export default {
-   content: [],  
+   content: ['./src/js/**/*.{html,js,svelte,ts}'],
    theme: {
      extend: {}
    },
    plugins: []
  };
```

3. `index.css` ã‚’ä½œã£ã¦ `@tailwind` ã‚’importã™ã‚‹

```diff css:src/js/main/index.css
+ @tailwind base;
+ @tailwind components;
+ @tailwind utilities;
```

4. `index.css` ã‚’ `index.html` ã§importã™ã‚‹

```diff html:src/js/main/index.html
  <!DOCTYPE html>
  <html lang="en">
    <head>
      <meta charset="UTF-8" />
      <link rel="icon" href="/favicon.ico" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Sample App</title>
+     <link rel="stylesheet" href="./index.css" />
    </head>
    <body>
      <div id="root"></div>
      <script type="module" src="./main.ts"></script>
    </body>
  </html>
```

5. å®Ÿéš›ã«ä½¿ã£ã¦ã¿ã‚‹

```diff html:src/js/main/App.svelte
- <h1 style="color: #ff5b3b;">Welcome to Bolt CEP!</h1>
+ <h1 class="text-red-400">Welcome to Bolt CEP!</h1>
```

ã“ã‚Œã§ã€`yarn build` ã§ãƒ“ãƒ«ãƒ‰ã—ã¦å¤‰æ›´ãŒåæ˜ ã•ã‚Œã¦ã„ã‚Œã°æˆåŠŸã€‚

# å‚è€ƒæ–‡çŒ®

https://hyperbrew.co/blog/scripts-extensions-plugins/
https://hyperbrew.co/blog/building-adobe-extensions/
https://github.com/hyperbrew/bolt-cep

# ãŠã‚ã‚Šã«

æœ¬å½“ã¯ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ã“ã‚ã¾ã§ã‚„ã‚ŠãŸã‹ã£ãŸãŒåŠ›å°½ããŸã®ã§ã“ã“ã§çµ‚ã‚ã‚‹ã€‚åŠ›ãŒæ²¸ã„ãŸã‚‰ã¾ãŸè¿½è¨˜ã™ã‚‹ã€‚
